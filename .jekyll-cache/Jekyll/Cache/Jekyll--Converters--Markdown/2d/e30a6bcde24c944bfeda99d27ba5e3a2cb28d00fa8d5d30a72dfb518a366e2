I"ô<p><strong>Dependency Injection</strong> TÃ¼rkÃ§eâ€™ye Ã§evrildiÄŸinde genelde <strong>BaÄŸÄ±mlÄ±lÄ±k Enjeksiyonu</strong> gibi garip bir kavram ortaya Ã§Ä±kÄ±yor. Bu kavramÄ±n zor anlaÅŸÄ±lmasÄ±ndaki esas sorun, her tÃ¼r teknik bilgiyi birebir Ã§evirmedeki inadÄ±mÄ±z diyebiliriz. Hatta Enjeksiyon kelimesinin de FransÄ±zca olduÄŸunu dÃ¼ÅŸÃ¼nÃ¼rsek, el birliÄŸi ile oldukÃ§a baÅŸarÄ±sÄ±z bir TÃ¼rkÃ§eleÅŸtirme Ã§alÄ±ÅŸmasÄ± yaptÄ±ÄŸÄ±mÄ±z aÅŸikardÄ±r.</p>

<p>Ã‡evirideki zorluklarÄ± bir kenara bÄ±rakÄ±p esas konumuza dÃ¶nersek, bu iÅŸin temelinde sÄ±nÄ±flarÄ±mÄ±zÄ±n baÄŸÄ±mlÄ±lÄ±ÄŸÄ±nÄ± gÃ¶rÃ¼rÃ¼z. UygulamamÄ±z iÃ§erisinde tÃ¼m sÄ±nÄ±flar bir iÅŸ yaparlar. YaptÄ±klarÄ± iÅŸlere sorumluluklarÄ± diyebiliriz. Ã–rneÄŸin KullanÄ±cÄ± sÄ±nÄ±fÄ± kullanÄ±cÄ± iÅŸlemlerini yapar ve iÃ§erisinde kullanÄ±cÄ± iÅŸlemlerini gerÃ§ekleÅŸtirecek metotlar barÄ±ndÄ±rÄ±r.</p>

<pre><code class="language-php">
class User {
 
   public function insert($name)
   {
      echo 'KullanÄ±cÄ± kaydedildi.';
   }
 
}
</code></pre>

<p>Ancak bu basit sÄ±nÄ±f bir yerden sonra bize yetmez. YukarÄ±daki Ã¶rneÄŸimizi geliÅŸtiririz ve yeni kullanÄ±cÄ± kaydÄ± esnasÄ±nda kullanÄ±cÄ±ya e-posta gÃ¶nderilmesini de isteriz. BaÅŸka sÄ±nÄ±flar iÃ§erisinden de e-posta gÃ¶nderilebilmesi iÃ§in de ortak kullanacaÄŸÄ±mÄ±z bir Email sÄ±nÄ±fÄ± tanÄ±mlarÄ±z.</p>

<pre><code class="language-php">
class Email {
 
   public function send()
   {
       echo 'E-Posta gÃ¶nderildi';
   }
 
}
</code></pre>

<p>Daha sonra User sÄ±nÄ±fÄ±nda aÅŸaÄŸÄ±daki gibi kullanÄ±rÄ±z.</p>

<pre><code class="language-php">
class User {
 
   public function insert($name)
   {
      echo 'KullanÄ±cÄ± kaydedildi.';
      $email = new Email;
      $email-&gt;send();
   }
 
}
</code></pre>

<p>YukarÄ±daki kodumuzu yazdÄ±ktan sonra iÅŸlerimiz sarpa sarar. Ã‡Ã¼nkÃ¼ <strong>User</strong> sÄ±nÄ±fÄ±nÄ±n Ã§alÄ±ÅŸabilmesi iÃ§in <strong>Email</strong> sÄ±nÄ±fÄ±nÄ± tanÄ±masÄ±na ihtiyacÄ± vardÄ±r. Siz User sÄ±nÄ±fÄ±nÄ± alÄ±p baÅŸka bir yerde de kullanmak isterseniz, Email sÄ±nÄ±fÄ±nÄ± da kopyalamanÄ±z ya da e-posta gÃ¶nderilen satÄ±rlarÄ± yeniden dÃ¼zenlemeniz gerekecektir.</p>

<p>Sadece bu da deÄŸil. Siz yukarÄ±daki sÄ±nÄ±fÄ± geliÅŸtirdiniz ve sistemi yayÄ±na aldÄ±nÄ±z diyelim. <strong>MÃ¼ÅŸteriler</strong> Ã§ok harika isteklerle gelmeye bayÄ±lÄ±rlar. :) Dediler ki â€œAdÄ± Ahmet olanlara e-posta, diÄŸerlerine SMS gÃ¶nderelim.â€ Bu durumda sizin User sÄ±nÄ±fÄ±nÄ± deÄŸiÅŸtirmeniz gerekecektir. Ancak bu iÅŸlem, sÄ±nÄ±fa hem <strong>yeni bir baÄŸÄ±mlÄ±lÄ±k</strong> hem de yeni <strong>if-else</strong> yapÄ±larÄ± eklemek demektir. User sÄ±nÄ±fÄ± haddinden fazla ÅŸey bilmeye baÅŸlayacaktÄ±r. Ä°lk Ã¶nce oldukÃ§a basit gÃ¶rÃ¼nen sÄ±nÄ±f, mÃ¼ÅŸteriden gelen bir taleple bir anda bambaÅŸka boyutlara taÅŸÄ±nabilir.</p>

<p>Bir diÄŸer Ã¶nemli husus ise Unit Test yazÄ±mÄ±nda karÅŸÄ±mÄ±za Ã§Ä±kacaktÄ±r. Siz bu User sÄ±nÄ±fÄ±nÄ± test ederken Email sÄ±nÄ±fÄ±nÄ± da Ã§alÄ±ÅŸÄ±r hale getirmek zorundasÄ±nÄ±z. EÄŸer Email sÄ±nÄ±fÄ±nda bir hata varsa bu User sÄ±nÄ±fÄ±nÄ± da etkiler. Bu da test yazmanÄ±zÄ± zorlaÅŸtÄ±rÄ±r. Email sÄ±nÄ±fÄ±nÄ± taklit de edemezsiniz. Ã‡Ã¼nkÃ¼ User ve Email sÄ±nÄ±flarÄ± artÄ±k iÃ§li dÄ±ÅŸlÄ± olmuÅŸlardÄ±r. Bu sorunu ortadan kaldÄ±rmak iÃ§in Email sÄ±nÄ±fÄ±mÄ±zÄ±n ne olduÄŸunu User sÄ±nÄ±fÄ±nÄ±n bilmemesi gerekmektedir.</p>

<pre><code class="language-php">
class User {
 
   private $notification;
 
   public function __construct(Notification $notification)
   {
      $this-&gt;notification = $notification;
   }
 
   public function insert($name)
   {
      echo 'KullanÄ±cÄ± kaydedildi.';
      $this-&gt;notification-&gt;send();
   }
 
}
</code></pre>

<p>User sÄ±nÄ±fÄ±mÄ±zÄ± yukarÄ±daki gibi deÄŸiÅŸtirdik. Dikkat ederseniz sÄ±nÄ±fÄ±mÄ±z iÃ§inde new komutu ile bir sÄ±nÄ±f oluÅŸturulmuyor. User sÄ±nÄ±fÄ±nÄ±n oluÅŸturulmasÄ± anÄ±nda bir Email sÄ±nÄ±fÄ±nÄ± dÄ±ÅŸarÄ±dan Notification aracÄ± olarak kullanmak iÃ§in gÃ¶nderebiliriz. BÃ¶ylelikle User sÄ±nÄ±fÄ± Email sÄ±nÄ±fÄ±nÄ± kendisi Ã§aÄŸÄ±rmÄ±yor, Ã§alÄ±ÅŸacaÄŸÄ± sÄ±nÄ±fÄ±n ne olduÄŸunu hiÃ§ mi hiÃ§ bilmiyor. AÅŸaÄŸÄ±daki ÅŸekilde User sÄ±nÄ±fÄ±nÄ±, Notification aracÄ± olarak  kullanabiliriz.</p>

<pre><code class="language-php">
$user = new User(new Email);
</code></pre>

<p>BÃ¶ylelikle User sÄ±nÄ±fÄ±na Ã§alÄ±ÅŸacaÄŸÄ± sÄ±nÄ±fÄ± biz gÃ¶ndermiÅŸ oluyoruz. User sÄ±nÄ±fÄ±, bu sÄ±nÄ±f baÄŸÄ±mlÄ±lÄ±ÄŸÄ±ndan kurtuluyor. MÃ¼ÅŸteriden gelen deÄŸiÅŸiklik isteÄŸini dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼mÃ¼zde, bu yapÄ± bizim iÃ§in oldukÃ§a uygundur. User sÄ±nÄ±fÄ±nÄ± new komutu ile oluÅŸturmadan Ã¶nce mÃ¼ÅŸteri adÄ±nÄ± kontrol eder ve ona gÃ¶re gerekli olan sÄ±nÄ±fÄ± kendisine gÃ¶ndeririz. User sÄ±nÄ±fÄ± ise kullanÄ±cÄ±ya gÃ¶ndereceÄŸi mesajÄ± e-posta ile mi yoksa SMS ile mi gÃ¶nderdiÄŸini asla bilmez. O sadece send() metodunu Ã§aÄŸÄ±rÄ±r. Yani User sÄ±nÄ±fÄ± sadece kendi iÅŸini yapar. BÃ¶ylece oldukÃ§a basit bir sÄ±nÄ±fÄ±mÄ±z olmuÅŸ olur. (KISS, Keep it simple, stupid)</p>

<p>Bu yapÄ±ya, baÄŸÄ±mlÄ±lÄ±ÄŸÄ± dÄ±ÅŸarÄ±dan enjekte etme yÃ¶ntemi denilebilir. Test yazarken ise Email ya da SMS sÄ±nÄ±fÄ±, iÃ§i boÅŸ bir send() metodu ile birlikte taklit edilerek User sÄ±nÄ±fÄ± test edilebilir. User sÄ±nÄ±fÄ± test edilirken, kendisine gÃ¶nderilen kÃ¼tÃ¼phaneyi kullanacaktÄ±r. DolayÄ±sÄ±yla test anÄ±nda sadece User sÄ±nÄ±fÄ±nÄ± birlikte Ã§alÄ±ÅŸtÄ±ÄŸÄ± sÄ±nÄ±flardan ayÄ±rarak (izole ederek, yalÄ±tarak) test edebilme olanaÄŸÄ±mÄ±z da olacaktÄ±r.</p>
:ET